# 计算机网络实验3

# ENSP模拟器- 使用

### 1.安装

### 2.学习过程

eNSP引导界面各栏功能如下：

- 快捷按钮提供“新建”和“打开”拓扑的操作入口。
- 样例栏提供常用的拓扑案例。
- 最近打开栏显示最近已浏览的拓扑文件名称，方便快速打开最近浏览的拓扑文件。
- 学习栏提供学习eNSP操作方法的入口。
- 主菜单栏分别为文件、编辑、视图、工具、帮助等，每项下对应相应的子菜单。
- 工具栏提供常用的工具，如新建拓扑、打开拓扑、保存拓扑、拓扑另存为、打印、撤销、前进、恢复鼠标、拖动、删除、删除所有连线、文本、调色板等工具，及论坛、官网等超级链接。
- 整个界面的中心空白区域为工作区域，用于新建和显示拓扑图。
- 在工作区域的左侧为网络设备区，提供设备和网线，供选择到工作区。
- 在工作区域的右侧为设备接口区，显示拓扑中的设备和设备已连接的接口。

### 3.eNSP的操作

#### 1.搭建简单拓扑

首先设定实验目的为搭建一个包括1台S5700交换机和2台PC机（分别为Client1和Client2）的拓扑环境。我们将在此拓扑基础上进行设备操作、抓包分析等操作。

启动eNSP后，缺省情况下工作区域为空白。接下来选中网络设备区中“交换机”中的S5700交换机，拖入工作区域，创建1台S5700交换机，并自动命名为“LSW1”，通过单击设备命名即可进对设备进行命名操作，此处我们命名为“S5700”。再选择终端设备中的PC机，拖入到工作区域，创建1台名为“Client1”的PC机；再操作1次，创建另1台PC机“Client2”。

接下来的工作是在PC机与路由器之间连接双绞线。单击网络设备区中的“设备连线”，选择第2种线缆类型“Copper”（铜线），此时移动到工作区域内的鼠标指针将变成线缆插头形状。单击刚创建的S5700图标，屏幕上弹出一个包含此交换机上全部可选端口的菜单，让我们选择将线缆连接到其中哪个端口上。我们可以选择将线缆连接到“GE 0/0/1”端口上。然后将线缆的另一端连接到Client1的“Ethernet0/0/1”网络接口上。

重复这一操作，完成从S5700上GE 0/0/2端口到Client2的连接。

至此，这个简单的拓扑就搭建完成了

### 2. 操作网络设备

搭建完简单的网络拓扑后，我们需要对工作区中的网络设备进行操作。

在拓扑搭建完成后，设备之间的线缆两端的指示灯始终为红色，即代表线缆未连通状态。与真实设备类似，我们需要单击“工具栏”中的绿色小三角 “开启设备”按钮，为工作区中的网络设备加电从而实现线缆的连通；考生也可以选中工作区中的部分设备，然后单击“开启设备”按钮，分批启动工作区中的网络设备。

第一步：配置两台主机的IP地址与子网掩码。在工作区双击Client1的PC图标，在“基础配置”界面，IP地址配置为“192.168.1.1”，子网掩码配置为“255.255.255.0”；类似步骤，配置另一台Client2的IP地址和子网掩码分别为“192.168.1.2”和“255.255.255.0”。

第二步：由Client1向Client2主机发送Ping报文。在工作区双击Client1的PC图标，进入Client1的操作界面；单击命令行，进入命令行界面；在命令行界面中输入“ipconfig”命令，查看当前Client1的IP地址配置信息，然后输入“ping 192.168.1.2”，可以看到已经成功Ping通Client2主机。

### 3.eNSP模拟器支持与本机网卡桥接的功能

第一步，添加cloud设备。在网络设备区，选择【其他设备】，选取【Cloud】设备，添加至工作区。

第二步，增加桥接本机的端口。双击工作区添加的【Cloud】设备，

点击【端口类型】下拉框，选择要创建的端口类型，在桥接本机网卡时，端口类型只能选择“Ethernet”或者“GE”。然后，点击【绑定信息】下拉框，选择需要桥接的网卡，以无线网卡【无线网络连接4】为例。

第三步，增加与模拟设备互联端口。【端口类型】选项保持与第二步相同的端口类型选项，【绑定信息】选项选择“UDP”，点击【增加】按钮完成UDP端口的添加。

第四步，建立端口映射关系。在端口映射设置中，选择相应的端口类型，根据“端口创建”区域表格中“No.”项端口编号，选择“入端口编号”和“出端口编号”，为了实现数据的双向互通，勾选“双向通道”选项，点击【增加】按钮，完成端口映射关系配置。配置完成后，如下图所示：

通过上述步骤，可实现eNSP桥接本机网卡的功能

根据桥接网卡后模拟环境的用途，将该功能归结为如下三种场景：

- 真实主机环境,例如，通过桥接本机网卡测试L2TP VPN。
- 与其他模拟器互通，通过桥接本机网卡功能实现eNSP中模拟的华为设备与其他厂商模拟器进行互通，测试不同厂商产品功能的互联互通，例如eNSP、GNS3同时桥接网卡实现模拟器之间的互通。
- 搭建分布式拓扑