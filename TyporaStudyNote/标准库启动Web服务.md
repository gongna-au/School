## 封锁

> 需要我们明确的是——尽量只锁定我们需要修改的那部分数据，而不是所有的数据，当我们锁定的数据越少，发生锁争议的机会就越小。

关于锁我们需要知道就是：

- **获取锁**
- **释放锁**
- **检查锁的状态**

那么在加锁时，需要考虑的就是：加锁的开销和并发程度

### 封锁类型

1.**读写锁**

- **共享锁** Shared），简写为 S 锁

  又叫读锁

- **互斥锁**Exclusive），简写为 X 锁

  又叫写锁

> 一个事务对数据对象 A 加了 X 锁，就可以对 A 进行读取和更新。加锁期间其它事务不能对 A 加任何锁。
>
> 一个事务对数据对象 A 加了 S 锁，可以对 A 进行读取操作，但是不能进行更新操作。加锁期间其它事务能对 A 加 S 锁，但是不能加 X 锁。

![img](https://camo.githubusercontent.com/c04b0f9003db3c86021fd3d61d95f44342bf87c5e1c1ca74654080dc48b5205b/68747470733a2f2f63732d6e6f7465732d313235363130393739362e636f732e61702d6775616e677a686f752e6d7971636c6f75642e636f6d2f696d6167652d32303139313230373231333532333737372e706e67)